
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD CATEGORIES</title>
    <link rel="stylesheet" href="CSS/style_category.css">
</head>
<body>
    <div class="wrapper">
        <table id="crud">
            <caption>CATEGORIES</caption>
            <thead>
                <tr>
                    <td><b>ID</b></td>
                    <td><b>IMAGELINK</b></td>
                    <td><b>NAME</b></td>
                    <td><b>ACTIONS</b></td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>
                        <button class="edit">Edit</button>
                        <button class="delete">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
        <button class="add-category">Add Category</button>
    </div>
    <div class="popup">
        <form action="">
            <input type="id" placeholder="id" name="id">
            <input type="imageLink" placeholder="imageLink" name="imageLink">
            <input type="name" placeholder="name" name="name">
            <input type="submit" value="submit" >
        </form>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
        import { getDatabase, ref, child, get, set, update, remove, onValue } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-database.js";
       
        const firebaseConfig = {
          apiKey: "AIzaSyALP0s0RbtbJ2glwArGQ1s_yQ9kwhGicpI",
          authDomain: "thestore-55f0f.firebaseapp.com",
          databaseURL: "https://thestore-55f0f-default-rtdb.firebaseio.com",
          projectId: "thestore-55f0f",
          storageBucket: "thestore-55f0f.appspot.com",
          messagingSenderId: "318647012345",
          appId: "1:318647012345:web:fc1ceaf122b8376eaa8b28",
          measurementId: "G-1XNCYRDHHN"
        };
      
        const app = initializeApp(firebaseConfig);
        const db = getDatabase();
        const categoryRef = ref(db, 'categories/');
        onValue(categoryRef, (snapshot) => {
            const data = snapshot.val();
            // console.log(data);
            var htmlData = '';
            for (var key in data) {
                var category = data[key];
                var name = category.name;
                var id = category.id;
                var imageLink = category.imageLink;
                htmlData += `
                    <tr>
                        <td><b>${name}</b></td>
                        <td>${id}</td>
                        <td>${imageLink}</td>
                        <td>
                            <button onclick="">Update</button>
                            <button onclick="">Delete</button>
                        </td>
                    </tr>
                `;
            }
            document.querySelector('tbody').innerHTML = htmlData;
        });   
    </script>

</body>
</html>